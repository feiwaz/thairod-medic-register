<app-toolbar [toolbarTitle]="role ? 'ตรวจสอบเลขประจำตัว' : 'ตรวจสอบสถานะการลงทะเบียน'" [isLoading]="isLoading">
</app-toolbar>
<div class="form-container">
  <form [formGroup]="verifyForm" (ngSubmit)="onSubmit()">
    <div class="form-field-container">
      <h3><b>เลขประจำตัวประชาชนที่ต้องการ{{ role ? 'ลงทะเบียน' : 'ตรวจสอบ'}}</b></h3>
      <mat-form-field floatLabel="always">
        <mat-label>เลขประจำตัวประชาชน</mat-label>
        <input matInput type="number" formControlName="id" placeholder="กรอกเฉพาะตัวเลข 13 หลัก" #id
          class="user-id-input">
        <mat-hint align="end">{{id.value.length}} / 13</mat-hint>
        <mat-error *ngIf="verifyForm.get('id')?.hasError('min') || verifyForm.get('id')?.hasError('max')">
          กรุณาใส่เลขให้ครบ 13 หลัก
          <mat-hint class="mat-hint-error">{{id.value.length}} / 13</mat-hint>
        </mat-error>
        <mat-error *ngIf="verifyForm.get('id')?.hasError('required')">
          จำเป็นต้องใส่*
        </mat-error>
      </mat-form-field>
    </div>
    <button mat-flat-button type="submit" color="primary"
      [disabled]="!verifyForm.dirty || !verifyForm.valid || isLoading">ตรวจสอบ</button>
    <ng-container *ngIf="isExistingUser">
      <p>ผู้ใช้นี้ได้ลงทะเบียนแล้ว<span class="anchor-container">
          <a [routerLink]="" (click)="onExistingUserCheckStatus()"
            [ngClass]="isLoading ? 'disabled' : 'enabled'">คลิกเพื่อตรวจสอบสถานะ
          </a></span></p>
    </ng-container>
    <ng-container *ngIf="errorResponse">
      <p>ไม่พบผู้ใช้นี้ในระบบ</p>
    </ng-container>
  </form>
</div>